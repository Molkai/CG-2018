<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Atividade 1 (A1)</title>
        <meta charset="utf-8">
        
        <style>
        </style>
    </head>
    
    <body>
        <div id="cena"></div>
        
        <script src="js/three.js"></script>
        <script src="js/OBJLoader.js"></script>
        
        <!-- Shaders -->
        <script type="x-shader/x-vertex" id="vertexshader">
            void main(){
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
            }
        </script>

        <script type="x-shader/x-fragment" id="fragmentshader">
            void main(){
                gl_FragColor = vec4(0.6,0.0,0.0,1.0);
            }
        </script>
        
        <!-- Configurações de Cena e Renderização -->
        <script>
            //Chamada dos shaders explícitos
            var shaderMaterial = new THREE.ShaderMaterial({
                vertexShader:   document.getElementById('vertexshader').textContent,
                fragmentShader: document.getElementById('fragmentshader').textContent,
            });
            
            // ------------- CENA -------------
            
            //Configura o tamanho da cena
            var WIDTH=600,
                HEIGHT=400;
            
            //Cria uma nova cena
            var cena = new THREE.Scene();
            
            //Iluminação da cena
            var ilumCena = new THREE.AmbientLight(0xbbbbbb, 0.4);
            cena.add(ilumCena);
            
            //Configuração de câmera
            var VIEW_ANGLE = 45,
                ASPECT = WIDTH / HEIGHT,
                NEAR = 1,
                FAR = 1000;
            var cam = new THREE.PerspectiveCamera(
                      VIEW_ANGLE,
                      ASPECT,
                      NEAR,
                      FAR);
            
            //Adiciona ponto de luz na câmera
            var ilumCam = new THREE.PointLight(0xffffff, 0.7);
            cam.add (ilumCam);
            cam.lookAt(cena.position);
            
            //A câmera começa em 0,0,0. Posiciona a câmera em uma certa profundidade
            cam.position.z = 300;
            
            //Adiciona a câmera à cena
            cena.add(cam);

            // ------------ OBJETO -------------
            
            //Instancia um objeto para carregar o arquivo .obj
            var loader = new THREE.OBJLoader();
            
            //Carrega o objeto para a cena
            loader.load("Objetos/Pumba/pumba.obj", function(object){
                cena.add(object);
            });
            
            // ------------ RENDERER ------------
            
            //Renderer do OpenGL
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(WIDTH, HEIGHT);
            
            //Captura o elemento do HTML onde será inserida a cena
            var scene = document.getElementById("cena");
            
            //Adiciona o renderer ao elemento HTML
            scene.appendChild(renderer.domElement);
            
            //Renderiza a cena
            renderer.render(cena, cam);
        </script>
    </body>
</html>
